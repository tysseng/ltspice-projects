* C:\git\ltspice-projects\Moog filter - xm8 half volt octave - 12-24-dB with const current sources and overdrive.asc
Q1 N001 N022 N026 0 BC547C
Q2 N019 N021 N001 0 BC547C
Q3 N014 N017 N019 0 BC547C
Q4 N016 N017 N020 0 BC547C
Q5 N020 N021 N009 0 BC547C
Q6 N009 N022 N027 0 BC547C
C1 N020 N019 22n
C2 N009 N001 22n
C3 N027 N026 22n
C4 N016 N014 22n
Q7 15V N013 N016 0 CA3046
Q8 15V N013 N014 0 CA3046
V1 15V 0 15
R1 N021 N022 1k
R2 N017 N021 1k
R3 N013 N017 1k
R4 15V N013 5k9
Q9 N026 N031 N033 0 CA3046
Q10 N027 N032 N033 0 CA3046
R5 N033 N039 1k
R6 N031 N034 1k
R7 N022 N034 1k
R8 N032 N034 1k
V2 0 -15V 15
C7 N030 N028 10µ V=63 Irms=200m Rser=1.3 Lser=0
R19 N034 0 1k
C8 N034 0 220µ V=63 Irms=200m Rser=1.3 Lser=0
V3 Audio 0 SINE(0 {AMPL} 500) AC 1
V4 CUTOFF_CV 0 5
XU2 N015 N014 N005 opamp Aol=100K GBW=10Meg
XU5 N018 N016 N011 opamp Aol=100K GBW=10Meg
R11 N005 N015 10k
R12 N018 N015 5k1
R13 N018 N011 10k
R14 N006 N005 100
R15 N007 N011 100
R17 N031 N030 120k
XU7 N029 0 N028 opamp Aol=100K GBW=10Meg
R24 N028 N029 20k
R25 N029 Audio 100k
XU8 NC_01 N023 N025 RESO_I_ABC N024 15V -15V NC_02 NC_03 HALF13700
R26 N024 N032 1k
R27 N023 N025 51
R28 P001 N023 50k
XU1 0 15V P001 pot_lin Rtot=10K wiper=0.5
R31 N011 N023 200
R39 N005 N025 200
Q11 N038 N041 N043 0 CA3046
Q13 N039 0 N043 0 CA3046
R18 15V N038 1MEG
R20 N043 N047 10k
C9 N047 N038 100p
XU3 N038 N050 N047 opamp Aol=100K GBW=10Meg
R21 N050 0 1000k
XU10 N035 0 N036 opamp Aol=100K GBW=10Meg
R32 N035 CUTOFF_CV 50k
R33 N035 P002 270k
XU4 15V -15V P002 pot_lin Rtot=10K wiper=0.5
XU6 NC_04 N007 N006 VCA_I_ABC N008 15V -15V NC_05 NC_06 HALF13700
XU12 N008 0 N004 opamp Aol=100K GBW=10Meg
R10 P003 N007 10k
XU11 15V 0 P003 pot_lin Rtot=10K wiper=.42
V7 RESO_CV 0 5
V8 VCA_CV 0 4.5
R9 N036 N041 56k
R34 N041 0 1k
R23 P004 N035 68k
XU9 P004 N036 N036 pot_lin Rtot=50K wiper=0.3
R36 N035 -15V 270k
XU14 N003 N001 N002 opamp Aol=100K GBW=10Meg
XU15 N012 N009 N010 opamp Aol=100K GBW=10Meg
R37 N002 N003 10k
R38 N012 N003 5k1
R40 N012 N010 10k
Q15 N044 N040 N037 0 PNP
R41 N042 N037 1MEG
XU16 N037 0 N040 opamp Aol=100K GBW=10Meg
XU17 0 -15V N042 pot_lin Rtot=10K wiper=0.5
R42 N037 VCA_CV 10k
D1 N040 N037 D
R43 VCA_I_ABC N044 10k
Q16 N049 N046 N045 0 PNP
R44 N048 N045 1MEG
XU18 N045 0 N046 opamp Aol=100K GBW=10Meg
XU19 0 -15V N048 pot_lin Rtot=10K wiper=0.5
R45 P005 RESO_CV 9.1k
D2 N046 N045 D
R46 RESO_I_ABC N049 10k
XU20 P005 NC_07 N045 pot_lin Rtot=20K wiper=0.76
R16 N038 LIN_FM 100k
XU13 N008 N004 N004 pot_lin Rtot=50K wiper=0.1
.model D D
.lib C:\Program Files (x86)\LTC\LTspiceIV\lib\cmp\standard.dio
.model NPN NPN
.model PNP PNP
.lib C:\Program Files (x86)\LTC\LTspiceIV\lib\cmp\standard.bjt
.lib opamp.sub
.lib LTC.lib
.lib lm13700.sub
* XM8 moog ladder filter\n0.5V octave\n13Hz to 13kHz with U4 at 0.1\nTODO: Test filter for self oscillation
.lib LTC.lib
.lib lm13700.sub
.ac oct 100 1 50000
* Flipping inputs here\ncompensates for \ninverting output
* This seems extremely\nsensitive, try in \npractice
* Transimpedance amp\nextends cutoff range\n(but does this change\nthe original sound\ntoo much?)
* 3300ppm\ntempco
* Tracking
* Centered pot gives about\n10Hz to 10kHz range for\n0 to 5V CV, mix multiple\nCVs to extend range\nor replace 50k resistor
* 1V/oct mixing point,\nuse 100k input for 1V/oct.\nCV is 0.5V/oct with 50k res
* 24dB
* 12dB
* Reso needs separate buffer\nas it must always be tapped\nat 24dB
* 24dB
* 12dB
* Remove these buffers if \nIf 12/24dB switch not needed.
;dc V8 0 5 0.1
* max -434uA on memorymoog, \nmax -488 here.\nAdjust max gain using VCA gain trimmer
* Deadband adjust,\nadd offset at bottom \nof CV for full off,\n0 to 220mV
* sum point, 10k\nresistor for similar \nresponse as CV
* Use 1.5MEG resistor\nto -15V for fixed 0.1V\noffset of CV instead of\nusing potmeter
* max -73 to -434 uA on memorymoog,\nmax -162 to -536 uA here.
* Leaving out the 1Meg and\ntrimpots will give I_abc very\nclose to 0 but may not be\nperfect and thus not 100%\noff.
* Use 120k resistor \ninstead of potmeter\nif computer calibrated
* Yusynth uses a 1/10 ratio for \nlinear fm vs reference (100k \nvs 1M reference resistor).\nI chose the same ratio here,\nmust be tested in practice.
* VCA Gain
* Audio - mostly undistorted at max, push past max for overdrive.\nV p.p. at base is 16mV\nMax 5vp.p: R24: 40k, R16: 33k, R17: 120k\nMax 10vp.p: R24: 20k, R16: 66k, R17: 120k\nMax 20vp.p: R24: 10k, R16: 132k, R17: 120k\n \nSafe, no distortion:\nR24: 1k, R16:120k, R17: 39k
;tran 0.01
.step PARAM AMPL 4 12 1
* TODO: Breadboard and test distortion
.lib potentiometer_standard.lib
.backanno
.end
